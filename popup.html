<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hello World</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      min-width: 400px; 
      min-height: 200px; 
      padding: 16px;
    }
    .section {
      margin-bottom: 16px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .section h3 {
      margin-top: 0;
      margin-bottom: 8px;
    }
    input, button {
      margin: 4px;
      padding: 4px 8px;
    }
    #messages, #ai-analysis {
      width: 100%;
      min-height: 100px;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #ccc;
      padding: 8px;
      margin-top: 8px;
      background: #f9f9f9;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .onboarding-step {
      display: none;
    }
    .onboarding-step.active {
      display: block;
    }
    .setup-status {
      padding: 8px;
      margin: 8px 0;
      border-radius: 4px;
    }
    .setup-status.success {
      background: #e8f5e8;
      border: 1px solid #4caf50;
    }
    .setup-status.warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
    }
    .setup-status.error {
      background: #ffeaea;
      border: 1px solid #f44336;
    }
  </style>
</head>
<body>
  <div class="section">
    <h3>ðŸŽ‰ Welcome to WedConnect!</h3>
    <div id="setup-status" class="setup-status success">
      <strong>âœ… Setup Complete:</strong> RSVP tracking is configured and ready to use!
      <br><button id="reset-setup" style="margin-top: 8px; padding: 4px 8px; background: #f0f0f0; border: 1px solid #ccc; border-radius: 3px;">Reset Setup</button>
    </div>
    <button id="start-setup">Start RSVP Setup Wizard</button>
  </div>

  <div id="onboarding-steps">
    <div id="step-1" class="onboarding-step active">
      <h4>Step 1: Connect to Google Sheets</h4>
      <p>First, let's connect to your Google Sheet where you want to track RSVPs.</p>
      <input type="text" id="setup-spreadsheet-id" placeholder="Paste your Google Sheets URL here">
      <button id="analyze-sheet">Analyze Sheet Structure</button>
    </div>

    <div id="step-2" class="onboarding-step">
      <h4>Step 2: Configure RSVP Tracking</h4>
      <div id="sheet-analysis"></div>
      <div id="header-row-config">
        <p><strong>Header Row:</strong> 
          <select id="header-row-selector">
            <option value="">Select header row...</option>
          </select>
          <button id="refresh-analysis">Refresh Analysis</button>
        </p>
        <p><small>Select which row contains your column headers. If your sheet has multiple header rows, choose the row with the actual column names.</small></p>
      </div>
      <div id="rsvp-config">
        <p><strong>Name Format:</strong></p>
        <label><input type="radio" name="name-format" value="separate" id="name-separate"> First Name and Last Name are separate columns</label><br>
        <label><input type="radio" name="name-format" value="combined" id="name-combined"> Full Name is in one column</label>
        
        <div id="separate-name-config">
          <p><strong>First Name Column:</strong> <select id="first-name-column"></select></p>
          <p><strong>Last Name Column:</strong> <select id="last-name-column"></select></p>
        </div>
        
        <div id="combined-name-config" style="display: none;">
          <p><strong>Full Name Column:</strong> <select id="full-name-column"></select></p>
        </div>
        
        <p><strong>RSVP Response Column:</strong> <select id="rsvp-response-column"></select></p>
        <button id="detect-dropdowns" style="margin-left: 8px; padding: 4px 8px; background: #e3f2fd; border: 1px solid #2196f3; border-radius: 3px;">Detect Dropdown Options</button>
      </div>
      
      <div id="rsvp-mapping-config">
        <h5>RSVP Response Mapping</h5>
        <p><small>Configure how AI responses should map to your dropdown options:</small></p>
        <div id="dropdown-options"></div>
        <div id="ai-mapping">
          <p><strong>AI Response Mapping:</strong></p>
          <p>When AI detects "YES" â†’ <select id="yes-mapping"></select></p>
          <p>When AI detects "NO" â†’ <select id="no-mapping"></select></p>
          <p>When AI detects "UNSURE" â†’ <select id="unsure-mapping"></select></p>
        </div>
      </div>
      <button id="save-config">Save Configuration</button>
    </div>

    <div id="step-3" class="onboarding-step">
      <h4>Step 3: Test Setup</h4>
      <div id="test-results"></div>
      <button id="test-rsvp">Test RSVP Entry</button>
      <button id="finish-setup">Finish Setup</button>
    </div>
  </div>

  <div class="section">
    <h3>WhatsApp Messages</h3>
    <button id="fetch-messages">Fetch WhatsApp Messages</button>
    <button id="analyze-messages">Analyze WhatsApp Messages</button>
    <div id="messages"></div>
  </div>

  <div class="section">
    <h3>Google Sheets Settings</h3>
    <input type="text" id="spreadsheet-id" placeholder="Paste Google Sheets URL here">
    <input type="text" id="sheet-name" placeholder="Sheet Name (optional, reads all if blank)">
    <button id="save-settings">Save Settings</button>
    <button id="read-sheet">Read Sheet Data</button>
  </div>

  <div class="section">
    <h3>Google Authentication</h3>
    <button id="google-signin">Sign in with Google</button>
  </div>

  <div class="section">
    <h3>AI Settings</h3>
    <input type="password" id="ai-api-key" placeholder="Enter Google Gemini API Key">
    <button id="save-ai-key">Save AI Key</button>
  </div>

  <div class="section">
    <h3>AI Analysis Results</h3>
    <div id="ai-analysis"></div>
  </div>

  <div class="section">
    <h3>Google Calendar & Docs</h3>
    <button id="test-calendar">Test Calendar Access</button>
    <button id="test-docs">Test Docs Access</button>
    <button id="create-wedding-event">Create Wedding Event</button>
    <button id="create-planning-doc">Create Planning Document</button>
    <div id="calendar-docs-results"></div>
  </div>

  <script src="popup.js"></script>
  <script src="sheets.js"></script>
  <script src="calendar.js"></script>
  <script src="docs.js"></script>
  <script src="aiProvider.js"></script>
</body>
</html> 